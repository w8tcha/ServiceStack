var __awaiter=this&&this.__awaiter||function(e,a,s,c){return new(s=s||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((c=c.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(r,o){var i,a,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=e(0),u.throw=e(1),u.return=e(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;c=u&&t[u=0]?0:c;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,a=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))c.label=t[1];else if(6===t[0]&&c.label<s[1])c.label=s[1],s=t;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(t)}}t=o.call(r,c)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};(e=>{"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd?define(["require","exports"],e):"undefined"!=typeof window&&e(0,window["@servicestack/desktop"]={})})(function(e,t){function n(e,i){return __awaiter(this,void 0,void 0,function(){var t,n,r,o;return __generator(this,function(e){switch(e.label){case 0:for(n in t=new FormData,i)i.hasOwnProperty(n)&&t.append(n,i[n]);e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch("https://host/script",{method:"POST",body:t})];case 2:return[4,(r=e.sent()).text()];case 3:if(o=e.sent(),r.ok)return[2,0<o.length?JSON.parse(o):null];throw o;case 4:throw e.sent();case 5:return[2]}})})}function r(e,r){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(e){switch(e.label){case 0:for(n in t=new FormData,r)r.hasOwnProperty(n)&&t.append(n,r[n]);e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch("https://host/script",{method:"POST",body:t})];case 2:return[4,e.sent().text()];case 3:return[2,e.sent()];case 4:throw e.sent();case 5:return[2]}})})}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0,o=e.length;r<o;r++)var i=e[r],n=-1===i.indexOf("://")?n.concat(i.split("/")):n.concat(i.lastIndexOf("/")===i.length-1?i.substring(0,i.length-1):i);var a=[];for(r=0,o=n.length;r<o;r++){var s=n[r];s&&"."!==s&&(".."===s?a.pop():a.push(s))}return""===n[0]&&a.unshift(""),a.join("/")||(a.length?"/":".")}function i(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateCode:t})];case 1:return[2,e.sent()]}})})}function a(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateCodeAsync:t})];case 1:return[2,e.sent()]}})})}function s(e){return'"'+e.replace('"','\\"')+'"'}function c(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i(t)];case 1:return[2,e.sent()]}})})}function u(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,a(t)];case 1:return[2,e.sent()]}})})}function l(n,r){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,fetch("/desktop/".concat(n,"/").concat(r))];case 1:if((t=e.sent()).ok)return[4,t.text()];throw"".concat(t.status," ").concat(t.statusText);case 2:return[2,e.sent()]}})})}function d(n,r,o){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,fetch("/desktop/".concat(n,"/").concat(r),{method:"POST",body:o})];case 1:if((t=e.sent()).ok)return[4,t.text()];throw"".concat(t.status," ").concat(t.statusText);case 2:return[2,e.sent()];case 3:throw e.sent();case 4:return[2]}})})}var w,f;Object.defineProperty(t,"__esModule",{value:!0}),t.KnownFolders=t.MessageBoxReturn=t.MessageBoxType=t.OpenFolderFlags=t.ShowWindowCommands=void 0,t.invokeHostJsonMethod=n,t.invokeHostTextMethod=r,t.combinePaths=o,t.evaluateScript=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateScript:t})];case 1:return[2,e.sent()]}})})},t.evaluateCode=i,t.evaluateLisp=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateLisp:t})];case 1:return[2,e.sent()]}})})},t.renderScript=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderScript:t})];case 1:return[2,e.sent()]}})})},t.renderCode=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderCode:t})];case 1:return[2,e.sent()]}})})},t.renderLisp=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderLisp:t})];case 1:return[2,e.sent()]}})})},t.evaluateScriptAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateScriptAsync:t})];case 1:return[2,e.sent()]}})})},t.evaluateCodeAsync=a,t.evaluateLispAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n(0,{EvaluateLispAsync:t})];case 1:return[2,e.sent()]}})})},t.renderScriptAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderScriptAsync:t})];case 1:return[2,e.sent()]}})})},t.renderCodeAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderCodeAsync:t})];case 1:return[2,e.sent()]}})})},t.renderLispAsync=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,r(0,{RenderLispAsync:t})];case 1:return[2,e.sent()]}})})},t.quote=s,t.evalToBool=c,t.evalToBoolAsync=u,t.desktopInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("desktopInfo")];case 1:return[2,e.sent()]}})})},t.openUrl=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("openUrl(".concat(s(t),")"))];case 1:return[2,e.sent()]}})})},t.start=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("start(".concat(s(t),")"))];case 1:return[2,e.sent()]}})})},t.expandEnvVars=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("expandEnvVars(".concat(s(t),")"))];case 1:return[2,e.sent()]}})})},t.findWindowByName=function(n){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return t=parseInt,[4,i("findWindowByName(".concat(s(n),")"))];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},t.clipboard=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("clipboard")];case 1:return[2,e.sent()]}})})},t.setClipboard=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("setClipboard(".concat(s(t),")"))];case 1:return[2,e.sent()]}})})},t.deviceScreenResolution=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("deviceScreenResolution")];case 1:return[2,e.sent()]}})})},t.primaryMonitorInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("primaryMonitorInfo")];case 1:return[2,e.sent()]}})})},t.windowSendToForeground=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("windowSendToForeground")];case 1:return[2,e.sent()]}})})},t.windowCenterToScreen=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c(t?"windowCenterToScreen(".concat(t,")"):"windowCenterToScreen")];case 1:return[2,e.sent()]}})})},t.windowSetFullScreen=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,u("windowSetFullScreen")];case 1:return[2,e.sent()]}})})},t.windowSetFocus=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("windowSetFocus")];case 1:return[2,e.sent()]}})})},t.windowShowScrollBar=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,u("windowShowScrollBar(".concat(t,")"))];case 1:return[2,e.sent()]}})})},t.windowSetPosition=function(t,n,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,u(r?"windowSetPosition(".concat(t,",").concat(n,",").concat(r,",").concat(o,")"):"windowSetPosition(".concat(t,",").concat(n,")"))];case 1:return[2,e.sent()]}})})},t.windowSetSize=function(t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,u("windowSetSize(".concat(t,",").concat(n,")"))];case 1:return[2,e.sent()]}})})},t.windowRedrawFrame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("windowRedrawFrame")];case 1:return[2,e.sent()]}})})},t.windowIsVisible=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("windowIsVisible")];case 1:return[2,e.sent()]}})})},t.windowIsEnabled=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("windowIsEnabled")];case 1:return[2,e.sent()]}})})},t.windowShow=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("windowShow")];case 1:return[2,e.sent()]}})})},t.windowHide=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("windowHide")];case 1:return[2,e.sent()]}})})},t.windowText=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("windowText")];case 1:return[2,e.sent()]}})})},t.windowSetText=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("windowSetText(".concat(s(t),")"))];case 1:return[2,e.sent()]}})})},t.windowSize=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("windowSize")];case 1:return[2,e.sent()]}})})},t.windowClientSize=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("windowClientSize")];case 1:return[2,e.sent()]}})})},t.windowClientRect=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("windowClientRect")];case 1:return[2,e.sent()]}})})},t.windowSetState=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,c("windowSetState(".concat(t,")"))];case 1:return[2,e.sent()]}})})},t.knownFolder=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("knownFolder(".concat(s(t),")"))];case 1:return[2,e.sent()]}})})},t.desktopTextFile=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,l("files",t)];case 1:return[2,e.sent()]}})})},t.desktopSaveTextFile=function(t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,d("files",t,n)];case 1:return[2,e.sent()]}})})},t.desktopDownloadsTextFile=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,l("downloads",t)];case 1:return[2,e.sent()]}})})},t.desktopSaveDownloadsTextFile=function(t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,d("downloads",t,n)];case 1:return[2,e.sent()]}})})},t.desktopSaveDownloadUrl=function(e,t){return o("/desktop/downloads",encodeURIComponent(e),"url",encodeURIComponent(t))},t.openFile=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("openFile(".concat(JSON.stringify(t),")"))];case 1:return[2,e.sent()]}})})},t.openFolder=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i("openFolder(".concat(JSON.stringify(t),")"))];case 1:return[2,e.sent()]}})})},t.messageBox=function(e){return __awaiter(this,arguments,void 0,function(t,n,r){return void 0===n&&(n=""),void 0===r&&(r=w.Ok|w.TopMost),__generator(this,function(e){switch(e.label){case 0:return[4,i("messageBox(".concat(s(t),",").concat(s(n),",").concat(r,")"))];case 1:return[2,e.sent()]}})})},(f=t.ShowWindowCommands={Hide:0,0:"Hide",Normal:1,1:"Normal",ShowMinimized:2,2:"ShowMinimized",Maximize:3,3:"Maximize",ShowMaximized:3})[3]="ShowMaximized",f[f.ShowNoActivate=4]="ShowNoActivate",f[f.Show=5]="Show",f[f.Minimize=6]="Minimize",f[f.ShowMinNoActive=7]="ShowMinNoActive",f[f.ShowNA=8]="ShowNA",f[f.Restore=9]="Restore",f[f.ShowDefault=10]="ShowDefault",f[f.ForceMinimize=11]="ForceMinimize",t.OpenFolderFlags={AllowMultiSelect:512,512:"AllowMultiSelect",CreatePrompt:8192,8192:"CreatePrompt",DontAddToRecent:33554432,33554432:"DontAddToRecent",EnableHook:32,32:"EnableHook",EnableIncludeNotify:4194304,4194304:"EnableIncludeNotify",EnableSizing:8388608,8388608:"EnableSizing",EnableTemplate:64,64:"EnableTemplate",EnableTemplateHandle:128,128:"EnableTemplateHandle",Explorer:524288,524288:"Explorer",ExtensionIsDifferent:1024,1024:"ExtensionIsDifferent",FileMustExist:4096,4096:"FileMustExist",ForceShowHidden:268435456,268435456:"ForceShowHidden",HideReadOnly:4,4:"HideReadOnly",LongNames:2097152,2097152:"LongNames",NoChangeDir:8,8:"NoChangeDir",NoDereferenceLinks:1048576,1048576:"NoDereferenceLinks",NoLongNames:262144,262144:"NoLongNames",NoNetworkButton:131072,131072:"NoNetworkButton",NoReadOnlyReturn:32768,32768:"NoReadOnlyReturn",NoTestFileCreate:65536,65536:"NoTestFileCreate",NoValidate:256,256:"NoValidate",OverwritePrompt:2,2:"OverwritePrompt",PathMustExist:2048,2048:"PathMustExist",ReadOnly:1,1:"ReadOnly",ShareAware:16384,16384:"ShareAware",ShowHelp:16,16:"ShowHelp"},(f=w||(t.MessageBoxType=w={}))[f.AbortRetryIgnore=2]="AbortRetryIgnore",f[f.CancelTryContinue=6]="CancelTryContinue",f[f.Help=16384]="Help",f[f.Ok=0]="Ok",f[f.OkCancel=1]="OkCancel",f[f.RetryCancel=5]="RetryCancel",f[f.YesNo=4]="YesNo",f[f.YesNoCancel=3]="YesNoCancel",f[f.IconExclamation=48]="IconExclamation",f[f.IconWarning=48]="IconWarning",f[f.IconInformation=64]="IconInformation",f[f.IconQuestion=32]="IconQuestion",f[f.IconStop=16]="IconStop",f[f.DefaultButton1=0]="DefaultButton1",f[f.DefaultButton2=256]="DefaultButton2",f[f.DefaultButton3=512]="DefaultButton3",f[f.DefaultButton4=768]="DefaultButton4",f[f.AppModal=0]="AppModal",f[f.SystemModal=4096]="SystemModal",f[f.TaskModal=8192]="TaskModal",f[f.DefaultDesktopOnly=131072]="DefaultDesktopOnly",f[f.RightJustified=524288]="RightJustified",f[f.RightToLeftReading=1048576]="RightToLeftReading",f[f.SetForeground=65536]="SetForeground",f[f.TopMost=262144]="TopMost",f[f.ServiceNotification=2097152]="ServiceNotification",t.MessageBoxReturn={Abort:3,3:"Abort",Cancel:2,2:"Cancel",Continue:11,11:"Continue",Ignore:5,5:"Ignore",No:7,7:"No",Ok:1,1:"Ok",Retry:4,4:"Retry",TryAgain:10,10:"TryAgain",Yes:6,6:"Yes"},t.KnownFolders={Contacts:"Contacts",Desktop:"Desktop",Documents:"Documents",Downloads:"Downloads",Favorites:"Favorites",Links:"Links",Music:"Music",Pictures:"Pictures",SavedGames:"SavedGames",SavedSearches:"SavedSearches",Videos:"Videos"}});